$.setup=function(){function p(a){let b=c[c.length-1],d=b[a].toLowerCase();$.dom.hidden(f)||h!==a?($.dom.text(m,b[a]),$.dom.attr("larousse","href","https://www.larousse.fr/dictionnaires/francais/"+d),$.dom.attr("wiktionary","href","https://fr.wiktionary.org/wiki/"+d),$.dom.show(f),h=a,window.scrollTo(0,0)):$.dom.hide(f)}function q(a,b){return b.split(a).length-1}function k(){$.dom.text(r,c[c.length-1].length)}function l(){let a,b=c[c.length-1];$.dom.empty(n);for(let d=0;d<b.length&&100>d;d++)a=$.dom.create("li"),
$.dom.text(a,b[d]),$.dom.on(a,"click",t=>p(d)),$.dom.append(n,a)}function w(a){let b=c[c.length-1];0===a?c.push(b.filter(d=>10>d.length)):c.push(b.filter(d=>d.length===a));k();l()}function x(a){let b=c[c.length-1],d=q(a,e.value.toUpperCase());c.push(b.filter(t=>q(a,t)>=d));k();l()}function y(a){a=c.length;let b=e.value.length;$.dom.hide(f);a===b?(a=e.value.charAt(b-1).toUpperCase(),a.match(/^[0-9]$/)?w(parseInt(a,10)):a.match(/^[a-z]$/i)?x(a):e.value=e.value.slice(0,-1)):a===b+2&&(c.pop(),k(),l())}
function u(a){c=[a.split(/\n/).filter(b=>b.length)];k();l()}function v(a){a.ok?a.text().then(function(b){g&&g.setItem("dico",LZString.compressToUTF16(b));u(b)}):console.error("GET failed: %s",a.statusText)}var r,c,e,n,f,h,g,m;return function(){r=$.dom.get("count");e=$.dom.get("input");n=$.dom.get("list");f=$.dom.get("search");$.dom.hide(f);h=-1;m=$.dom.get("word");"undefined"!==typeof localStorage&&(g=localStorage);if(g){let a=window.location.search?null:g.getItem("dico");a?u(LZString.decompressFromUTF16(a)):
fetch("dico.text").then(v)}else fetch("dico.text").then(v);$.dom.on(e,"keyup",y);$.dom.on(e,"submit",a=>console.log(a));$.dom.on(m,"click",a=>p(h))}}();
