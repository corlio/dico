$.setup=function(){function r(a){let b=c[c.length-1],d=b[a].toLowerCase();$.dom.hidden(g)||l!==a?($.dom.text(m,b[a]),$.dom.attr("larousse","href","https://www.larousse.fr/dictionnaires/francais/"+d),$.dom.attr("wiktionary","href","https://fr.wiktionary.org/wiki/"+d),$.dom.show(g),l=a,window.scrollTo(0,0)):$.dom.hide(g)}function t(a,b){return b.split(a).length-1}function x(){let a,b=c[c.length-1];$.dom.empty(n);for(let d=0;d<b.length&&100>d;d++)a=$.dom.create("li"),$.dom.text(a,b[d]),$.dom.on(a,"click",
()=>r(d)),$.dom.append(n,a)}function f(){$.dom.text(u,c[c.length-1].length);x()}function y(a){let b=c[c.length-1];0===a?c.push(b.filter(d=>2<d.length&&10>d.length)):c.push(b.filter(d=>d.length===a));f()}function z(a){c.push(c[c.length-1].filter(b=>b.length>a));f()}function A(a){c.push(c[c.length-1].filter(b=>b.length<a));f()}function B(a){let b=c[c.length-1],d=t(a,h.value.toUpperCase());c.push(b.filter(e=>t(a,e)>=d));f()}function C(a){c.push(c[c.length-1].filter(b=>!b.includes(a)));f()}function D(){let a=
c.length-1;var b=h.value;let d=[];for(var e;b.length;)if(e=b.match(/^([0-9]|[<>][1-9]|[A-Z]|![A-Z])(.*)$/i))d.push(e[1].toUpperCase()),b=e[2];else{h.value=d.join("")+b;break}e=d.length;$.dom.hide(g);if(a>e)for(;a>e;)c.pop(),f(),a--;else if(e>a)for(;e>a;)if(b=d[a],b.match(/^[0-9]$/))y(parseInt(b,10)),a++;else if(b.match(/^>[1-9]$/))z(parseInt(b.substring(1),10)),a++;else if(b.match(/^<[1-9]$/))A(parseInt(b.substring(1),10)),a++;else if(b.match(/^[A-Z]$/))B(b),a++;else if(b.match(/^![A-Z]$/))C(b.substring(1)),
a++;else{console.error("unexpected spec: %s",b);break}}function v(a){let b,d=[],e="",p;a.split(/\n/).forEach(function(q){q.length&&(b=parseInt(q.substring(0,1),16),p=e.substring(0,b)+q.substring(1),d.push(p),e=p)});c=[d];f()}function w(a){a.ok?a.text().then(function(b){k&&k.setItem("dico",LZString.compressToUTF16(b));v(b)}):console.error("GET failed: %s",a.statusText)}var u,c,h,n,g,l,k,m;return function(){u=$.dom.get("count");h=$.dom.get("input");n=$.dom.get("list");g=$.dom.get("search");$.dom.hide(g);
l=-1;m=$.dom.get("word");"undefined"!==typeof localStorage&&(k=localStorage);if(k){let a=window.location.search?null:k.getItem("dico");a?v(LZString.decompressFromUTF16(a)):fetch("dico.text").then(w)}else fetch("dico.text").then(w);$.dom.on(h,"keyup",D);$.dom.on(h,"submit",a=>console.log(a));$.dom.on(m,"click",()=>r(l))}}();
