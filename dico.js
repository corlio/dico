$.setup=function(){function p(a){let b=c[c.length-1],d=b[a].toLowerCase();$.dom.hidden(g)||l!==a?($.dom.text(m,b[a]),$.dom.attr("larousse","href","https://www.larousse.fr/dictionnaires/francais/"+d),$.dom.attr("wiktionary","href","https://fr.wiktionary.org/wiki/"+d),$.dom.show(g),l=a,window.scrollTo(0,0)):$.dom.hide(g)}function q(a,b){return b.split(a).length-1}function v(){let a,b=c[c.length-1];$.dom.empty(n);for(let d=0;d<b.length&&100>d;d++)a=$.dom.create("li"),$.dom.text(a,b[d]),$.dom.on(a,"click",
()=>p(d)),$.dom.append(n,a)}function f(){$.dom.text(r,c[c.length-1].length);v()}function w(a){let b=c[c.length-1];0===a?c.push(b.filter(d=>2<d.length&&10>d.length)):c.push(b.filter(d=>d.length===a));f()}function x(a){c.push(c[c.length-1].filter(b=>b.length>a));f()}function y(a){c.push(c[c.length-1].filter(b=>b.length<a));f()}function z(a){let b=c[c.length-1],d=q(a,h.value.toUpperCase());c.push(b.filter(e=>q(a,e)>=d));f()}function A(a){c.push(c[c.length-1].filter(b=>!b.includes(a)));f()}function B(){let a=
c.length-1;var b=h.value;let d=[];for(var e;b.length;)if(e=b.match(/^([0-9]|[<>][1-9]|[A-Z]|![A-Z])(.*)$/i))d.push(e[1].toUpperCase()),b=e[2];else{h.value=d.join("")+b;break}e=d.length;$.dom.hide(g);if(a>e)for(;a>e;)c.pop(),f(),a--;else if(e>a)for(;e>a;)if(b=d[a],b.match(/^[0-9]$/))w(parseInt(b,10)),a++;else if(b.match(/^>[1-9]$/))x(parseInt(b.substring(1),10)),a++;else if(b.match(/^<[1-9]$/))y(parseInt(b.substring(1),10)),a++;else if(b.match(/^[A-Z]$/))z(b),a++;else if(b.match(/^![A-Z]$/))A(b.substring(1)),
a++;else{console.error("unexpected spec: %s",b);break}}function t(a){c=[a.split(/\n/).filter(b=>b.length)];f()}function u(a){a.ok?a.text().then(function(b){k&&k.setItem("dico",LZString.compressToUTF16(b));t(b)}):console.error("GET failed: %s",a.statusText)}var r,c,h,n,g,l,k,m;return function(){r=$.dom.get("count");h=$.dom.get("input");n=$.dom.get("list");g=$.dom.get("search");$.dom.hide(g);l=-1;m=$.dom.get("word");"undefined"!==typeof localStorage&&(k=localStorage);if(k){let a=window.location.search?
null:k.getItem("dico");a?t(LZString.decompressFromUTF16(a)):fetch("dico.text").then(u)}else fetch("dico.text").then(u);$.dom.on(h,"keyup",B);$.dom.on(h,"submit",a=>console.log(a));$.dom.on(m,"click",()=>p(l))}}();
